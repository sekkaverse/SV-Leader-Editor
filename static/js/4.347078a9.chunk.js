(this.webpackJsonpsvdb=this.webpackJsonpsvdb||[]).push([[4],{77:function(e,t,n){"use strict";n.r(t);var a=n(58),i=n(59),l=n(55),s=n(76),o=n(75),r=n(0),c=n.n(r),d=n(74),p=n(78),m=n(16);window.PIXI=d,n(71);var u=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).updatePixiCnt=function(e){i.pixi_cnt=e,i.pixi_cnt&&i.pixi_cnt.children.length<=0&&(i.pixi_cnt.appendChild(i.app.view),i.setup())},i.setup=function(){i.app.loader.baseUrl="https://pure-dusk-77493.herokuapp.com/assets",i.app.loader.add("class_3301.json","class_3301.json").load((function(e,t){i.spine_data=t["class_3301.json"].spineData,i.loadSpineData()}))},i.loadSpineData=function(){null!==i.animation&&i.app.stage.removeChild(i.animation),i.animation=new window.PIXI.spine.Spine(i.spine_data),i.animation.x=i.app.screen.width/2,i.animation.y=i.app.screen.height/2,i.animation.scale.set(i.animScale),i.animation.spineData.skins.length>1&&i.animation.skeleton.setSkinByName(i.animation.spineData.skins[1].name),i.app.stage.addChild(i.animation),i.animation.state.setAnimation(0,"idle",!0),i.loading=!1,i.setState(i.state)},i.renderButtons=function(){if(i.animation)return i.animation.spineData.animations.map((function(e){return c.a.createElement(m.d,{type:"button",onClick:function(){return i.animation.state.setAnimation(0,e.name,!0)},style:{margin:"5px"},key:"button".concat(e.name)},e.name)}))},i.renderSkinButtons=function(){if(i.animation&&i.animation.spineData.skins.length>1&&0!==i.animation.spineData.skins[1].attachments.length)return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{style:{marginBottom:"20px",borderBottom:"2px solid pink",paddingTop:"14px"}},i.props.t("Switch expression")),i.animation.spineData.skins.map((function(e){return c.a.createElement(m.d,{type:"button",onClick:function(){return i.animation.skeleton.setSkinByName(e.name)},key:"skin".concat(e.name)},e.name)})))},i.collectImage=function(e){var t=new FileReader,n=Object(l.a)(i);t.onload=function(e){n.setState({image:e.target.result})},t.readAsDataURL(e.target.files[0]),e.target.value=null},i.collectJson=function(e){var t=new FileReader,n=Object(l.a)(i);t.onload=function(e){n.setState({json:e.target.result})},t.readAsText(e.target.files[0]),e.target.value=null},i.collectAtlas=function(e){var t=new FileReader,n=Object(l.a)(i);t.onload=function(e){n.setState({atlas:e.target.result})},t.readAsText(e.target.files[0]),e.target.value=null},i.redoSpine=function(){var e=JSON.parse(i.state.json),t=i.state.atlas,n=Object(l.a)(i),a=new window.PIXI.spine.core.TextureAtlas(t,(function(e,t){t(window.PIXI.BaseTexture.from(n.state.image))})),s=new window.PIXI.spine.core.AtlasAttachmentLoader(a),o=new window.PIXI.spine.core.SkeletonJson(s);i.spine_data=o.readSkeletonData(e),i.loadSpineData()},i.state={image:null,atlas:null,json:null},i.loading=!0,i.pixi_cnt=null,i.app=new d.Application({width:window.innerWidth>window.innerHeight?window.innerWidth/2:window.innerWidth,height:window.innerWidth>window.innerHeight?window.innerWidth/2:window.innerWidth,transparent:!1}),i.animation=null,i.animScale=.6,i.spine_data=null,i}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return c.a.createElement(m.a,null,c.a.createElement(m.b,null,this.loading&&c.a.createElement("p",{style:{position:"absolute",top:"50%",left:"50%"}},"Loading..."),c.a.createElement(m.f,{ref:this.updatePixiCnt,style:{display:this.loading?"hidden":"inline"}}),c.a.createElement("div",{style:{display:"inline"}},c.a.createElement("p",{style:{marginBottom:"20px",borderBottom:"2px solid pink",paddingTop:"14px"}},this.props.t("Switch animation")),c.a.createElement("div",null,this.renderButtons()),c.a.createElement("div",null,this.renderSkinButtons()),this.animation&&c.a.createElement("div",null,c.a.createElement(m.d,{style:{width:"5vw"},onClick:function(){e.animScale+=.1,e.animation.scale.set(e.animScale)}},"Zoom +"),c.a.createElement(m.d,{style:{width:"5vw"},onClick:function(){e.animScale-=.1,e.animation.scale.set(e.animScale)}},"Zoom -")),c.a.createElement("div",null,c.a.createElement(m.e,{htmlFor:"image",style:{width:"5vw"}},"Upload PNG ",null===this.state.image?"(0/1)":"(1/1)"),c.a.createElement(m.c,{type:"file",id:"image",accept:"image/*",onChange:this.collectImage}),c.a.createElement(m.e,{htmlFor:"atlas",style:{width:"5vw"}},"Upload Atlas ",null===this.state.atlas?"(0/1)":"(1/1)",c.a.createElement(m.c,{type:"file",id:"atlas",accept:"*/*",onChange:this.collectAtlas})),c.a.createElement(m.e,{htmlFor:"json",style:{width:"5vw"}},"Upload JSON ",null===this.state.json?"(0/1)":"(1/1)",c.a.createElement(m.c,{type:"file",id:"json",accept:"json/*",onChange:this.collectJson}))),c.a.createElement("div",null,c.a.createElement(m.d,{style:{width:"5vw"},onClick:function(){e.redoSpine()}},"Redo Spine")),c.a.createElement("div",null,c.a.createElement("h3",null,"Instructions"),c.a.createElement("ol",{style:{textAlign:"left"}},c.a.createElement("li",null,"Use UnityEX to open ui_class_XXXX.unity3d."),c.a.createElement("li",null,'Extract "class_XXXX.txt" to a file. This is the JSON file input.'),c.a.createElement("li",null,'Extract "class_XXXX.atlas.txt" to a file. This is the ATLAS file input.'),c.a.createElement("li",null,'Extract "class_XXXX_A.tex" and "class_XXXX.tex".'),c.a.createElement("li",null,"Edit as needed."),c.a.createElement("li",null,"Use the alpha as a transparency map to get a partially transparent PNG file."),c.a.createElement("li",null,"Upload to the image field."),c.a.createElement("li",null,'Press "Redo Spine"'))))))}}]),n}(c.a.Component);t.default=Object(p.a)()(u)}}]);
//# sourceMappingURL=4.347078a9.chunk.js.map